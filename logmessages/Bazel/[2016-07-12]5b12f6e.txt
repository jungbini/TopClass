  Fix TMPDIR in test_genrule_default_env  TMPDIR is not just an arbitrary environment variable that we expect to be passed to tests; it is the place where we temporary files may be stored. This semantic rule also applies to bazel itself. So TMPDIR has to point to a directory where we can write to. Unfortunately, the only way we have to find out a directory to write to is TMPDIR itself. So, create a fresh directory there and pass that directory on as new value for TMPDIR to see if it is passed through to the action.  Also, fix up the resetting of TMPDIR: do not assume unset is the same as set to the empty string.  -- Change-Id: I378ae9196c33d988686e8a2a6d3c142238fe8aab Reviewed-on: https://bazel-review.googlesource.com/#/c/4030 MOS_MIGRATED_REVID=127196634  