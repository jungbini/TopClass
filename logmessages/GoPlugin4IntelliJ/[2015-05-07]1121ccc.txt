  better processing for function types, fix #1607  