  Making the TP3 test suit run against Titan. Bugfixes and other fun stuff.  