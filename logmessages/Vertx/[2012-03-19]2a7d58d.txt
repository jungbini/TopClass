  fixed race condition in event bus, plus some perf stuff  