  fixes to redraw and looping  