  Busted out inner class as an attempt to fix unit test on ibm jvm.  