  (GRADLE-1127) IDEA plugin generates invalid .ipr file when multiple projects have the same name (GRADLE-1408) IDEA plugin generates incorrect module dependencies when non-default module name is used  GRADLE-1127 should be completed now but I need to do some more checks & a code review. To implement GRADLE-1127 I needed to fix GRADLE-1408 anyway (to make sure the dependencies are correctly resolved to new, deduplicated names). Hence both issues are sort of fixed by this check-in.  To fix the problems I needed to create yet another task (ModuleNameDeduper) that runs before: - idea project generation - ideaProject task. *.ipr file specifies the list of modules so modules names should be unique by this time - idea modules generation - ideaModule tasks. *.iml files need to have correct file names and correct dependencies so module names should be unique by this time - cleaning modules - cleanIdeaModule tasks. When cleaning up *.imls we need to know the correct file names. To make sure deduper runs first it is added as dependency to the tasks.  Added corresponding unit tests  Pending: - code review & refactoring - proper integration test for both issues (so far the integration test is half-manual) - make sure edge cases are covered / covered in the integration test  