 fix possible out-of-order write bug  