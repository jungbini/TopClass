  bug fixed for custom typeKey. issue #585  