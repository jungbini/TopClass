 bug fixed for external class  