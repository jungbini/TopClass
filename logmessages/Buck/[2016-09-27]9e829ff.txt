  Use existing PerBuildState for getting attributes of targets in buck query  Summary: There's a bunch of methods in Parser which creates a PerBuildState inline, this doesn't benefit from parser caches in PerBuildState.  Here I fix one case where `buck query` is calling one of these functions in a loop, causing slow re-parses for each iteration of the loop. Buck query already creates a PerBuildState, so I use that one instead (and modify the method to take an external PerBuildState).  Test Plan: buck query 'deps(foo)' --output-attributes visibility  runs much faster.  Reviewed By: marcinkosiba  fbshipit-source-id: 115f868  