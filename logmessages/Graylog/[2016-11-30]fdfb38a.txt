  Store streams with index ranges (#3129)  * when calculating index ranges, also determine the streams contained in the index  this is later being used for selecting the matching indices for a search, even when the index set of a stream is changed over time  * only log query on debug  * rebuild index ranges must resolve current write alias  previously it used a wrong method which could lead to calculation of index ranges for the current write target, which could affect the search take index ranges into account when iterating, and properly repair bad index ranges for write indices  * use stream information from index ranges when present  this moves the index range handling from into the Searches class and pushes the filter handling down, to make invoking the methods easier. index ranges now match when the times match, for stream searches the current index set must be the target of the stream, or an index range must contain explicit information about which streams are contained in the index (which is performed by index range calculation now)  * recalculate index ranges (and contained stream ids) for the default index set if necessary  if the default index set's ranges do not contain any stream ids, trigger a recalculation for those indices that need it this makes sure that searches also look into older indices that contain messages on those streams, as opposed to only the currently configured index set  * Update UPGRADING.rst  mention index set/index range recalculation for default stream  * fix error handling  