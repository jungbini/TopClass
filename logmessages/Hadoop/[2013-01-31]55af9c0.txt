  Merging r1196676 and r1197801 from trunk to branch-0.23 to fix HDFS-2477  git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.23@1441131 13f79535-47bb-0310-9956-ffa450edef68  