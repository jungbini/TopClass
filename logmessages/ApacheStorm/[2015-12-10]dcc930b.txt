  fixing FileLock and sharing code with DirLock for file creation logic  