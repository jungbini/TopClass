  Fixed bug on using functions in traversing  