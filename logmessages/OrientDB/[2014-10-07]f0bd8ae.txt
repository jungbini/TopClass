  fixed first case of multithreading lock implementation. issue #2866  