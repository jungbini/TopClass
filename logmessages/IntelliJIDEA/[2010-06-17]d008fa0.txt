  IDEA-55657 & other repository attach fixes  