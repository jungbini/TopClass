  new dependencies collection method (fixed serious threading issues)  