  another take for TreeUi race conditions fixing  