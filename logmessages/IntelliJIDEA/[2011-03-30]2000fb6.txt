  Fixed a bug: every other command isn't added to history if history size = max history size.  