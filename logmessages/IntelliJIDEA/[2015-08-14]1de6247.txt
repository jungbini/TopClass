  fix smart pointer range markers being updated twice  