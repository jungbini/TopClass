  fix for IDEADEV-4645 and slight clean up  