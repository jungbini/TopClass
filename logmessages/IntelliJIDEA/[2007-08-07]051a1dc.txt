  memory leak fix: correctly detach TextComponentUndoProvider from keymap  