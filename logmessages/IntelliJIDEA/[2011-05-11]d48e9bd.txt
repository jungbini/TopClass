  fix SOE in shape-based resolve  