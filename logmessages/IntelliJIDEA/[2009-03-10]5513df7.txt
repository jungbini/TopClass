  optimization: replace all occurrence is dramatically faster bug fix: persistent markers are recalculated on whole file change  