  js push down, tests, minor fixes  