  fix exceptions, close after successful compile, performance  