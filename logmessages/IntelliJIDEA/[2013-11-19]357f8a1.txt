  Lot of fixes when working with types, tests for .new, cleanup  