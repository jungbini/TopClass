  Groovy: control flow: nested switches & for-s fix & tests  