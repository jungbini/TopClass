ontentLength would fall into an infinite loop unless the method were overridden by a subclass (which it is in the majority of use cases).  This commit:  - fixes the infinite recursion by refactoring to a while loop  - asserts that the value returned from #getInputStream is not null in order to avoid NullPointerException  - tests both of the above  - adds Javadoc to the Resource interface to clearly document that the contract for any implementation is that #getInputStream must not return null  Issue: SPR-9163 Backport-Issue: SPR-9161 Backport-Commit: 7ca5fba05ff0ef4dcf076303e1cba19c4b771d94  