  fixed up the code generator after moving stuff around and updated with the latest/greatest documentation and function includes  