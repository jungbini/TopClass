  Refactor CodegenContext and subclasses  Drop unused methods, inline parameters, fix warnings, etc.  