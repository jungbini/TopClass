  Recursion detection fixed for memoized functions  